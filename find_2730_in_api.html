<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞ 2730 –≤ API</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .section { background: white; padding: 20px; margin: 20px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .success { color: #28a745; font-weight: bold; }
        .error { color: #dc3545; font-weight: bold; }
        .info { color: #17a2b8; }
        .warning { color: #ffc107; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin: 5px; }
        .results { background: #f8f9fa; padding: 15px; border-radius: 4px; margin: 10px 0; border-left: 4px solid #007bff; }
        .found-item { background: #d4edda; padding: 10px; margin: 5px 0; border-radius: 4px; border-left: 3px solid #28a745; }
        .highlight { background: #fff3cd; border-left: 3px solid #ffc107; }
    </style>
</head>
<body>
    <h1>üîç –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞ 2730 –≤ API</h1>
    
    <div class="section">
        <h2>1. –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤</h2>
        <button onclick="loadAllProducts()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã</button>
        <div id="load-results" class="results"></div>
    </div>
    
    <div class="section">
        <h2>2. –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞ 2730</h2>
        <button onclick="find2730()">–ù–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä 2730</button>
        <div id="find-results" class="results"></div>
    </div>
    
    <div class="section">
        <h2>3. –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤</h2>
        <button onclick="findSimilar()">–ù–∞–π—Ç–∏ –ø–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã</button>
        <div id="similar-results" class="results"></div>
    </div>

    <script>
        let allProducts = [];

        async function loadAllProducts() {
            const results = document.getElementById('load-results');
            results.innerHTML = '<div class="info">üîÑ –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ API...</div>';
            
            try {
                const response = await fetch('http://localhost:8000/api/products?start=0&limit=1000');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                allProducts = data.products || [];
                
                results.innerHTML = `
                    <div class="success">‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!</div>
                    <div class="info">üìä –í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤: ${allProducts.length}</div>
                `;
                
            } catch (error) {
                results.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞: ${error.message}</div>`;
            }
        }

        function find2730() {
            const results = document.getElementById('find-results');
            
            if (allProducts.length === 0) {
                results.innerHTML = '<div class="error">‚ùå –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã</div>';
                return;
            }
            
            results.innerHTML = '<div class="info">üîç –ò—â–µ–º —Ç–æ–≤–∞—Ä 2730...</div>';
            
            // –ò—â–µ–º —Ç–æ–≤–∞—Ä—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ "2730"
            const productsWith2730 = allProducts.filter(product => {
                const name = product.name.toLowerCase();
                return name.includes('2730') || name.includes('ernie ball') && name.includes('cobalt slinky') && name.includes('10-62');
            });
            
            if (productsWith2730.length > 0) {
                results.innerHTML += `
                    <div class="success">‚úÖ –ù–∞–π–¥–µ–Ω–æ ${productsWith2730.length} —Ç–æ–≤–∞—Ä–æ–≤ —Å 2730:</div>
                `;
                
                productsWith2730.forEach((product, index) => {
                    const is7String = product.name.toLowerCase().includes('7-string') || 
                                    product.name.toLowerCase().includes('7 string');
                    
                    results.innerHTML += `
                        <div class="${is7String ? 'found-item' : 'highlight'}">
                            <strong>${index + 1}. ${product.name}</strong><br>
                            <small>7-—Å—Ç—Ä—É–Ω–Ω—ã–π: ${is7String ? '‚úÖ –î–ê' : '‚ùå –ù–ï–¢'}</small><br>
                            <small>ID: ${product.id || 'N/A'}</small>
                        </div>
                    `;
                });
            } else {
                results.innerHTML += `
                    <div class="warning">‚ö†Ô∏è –¢–æ–≤–∞—Ä 2730 –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ API</div>
                `;
            }
            
            // –ò—â–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã Ernie Ball –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
            const ernieBallProducts = allProducts.filter(product => {
                return product.name.toLowerCase().includes('ernie ball');
            });
            
            results.innerHTML += `
                <div style="margin-top: 20px;">
                    <h4>üîç –í—Å–µ —Ç–æ–≤–∞—Ä—ã Ernie Ball (${ernieBallProducts.length}):</h4>
                </div>
            `;
            
            ernieBallProducts.forEach((product, index) => {
                const is7String = product.name.toLowerCase().includes('7-string') || 
                                product.name.toLowerCase().includes('7 string');
                const has2730 = product.name.toLowerCase().includes('2730');
                
                results.innerHTML += `
                    <div class="${has2730 ? 'highlight' : (is7String ? 'found-item' : '')}">
                        <strong>${index + 1}. ${product.name}</strong><br>
                        <small>7-—Å—Ç—Ä—É–Ω–Ω—ã–π: ${is7String ? '‚úÖ –î–ê' : '‚ùå –ù–ï–¢'}</small>
                        ${has2730 ? '<br><small>üéØ –°–û–î–ï–†–ñ–ò–¢ 2730!</small>' : ''}
                    </div>
                `;
            });
        }

        function findSimilar() {
            const results = document.getElementById('similar-results');
            
            if (allProducts.length === 0) {
                results.innerHTML = '<div class="error">‚ùå –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã</div>';
                return;
            }
            
            results.innerHTML = '<div class="info">üîç –ò—â–µ–º –ø–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã...</div>';
            
            // –ò—â–µ–º —Ç–æ–≤–∞—Ä—ã —Å –ø–æ—Ö–æ–∂–∏–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
            const similarProducts = allProducts.filter(product => {
                const name = product.name.toLowerCase();
                return name.includes('ernie ball') && 
                       name.includes('cobalt slinky') && 
                       (name.includes('10-62') || name.includes('10-56') || name.includes('11-58'));
            });
            
            if (similarProducts.length > 0) {
                results.innerHTML += `
                    <div class="success">‚úÖ –ù–∞–π–¥–µ–Ω–æ ${similarProducts.length} –ø–æ—Ö–æ–∂–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤:</div>
                `;
                
                similarProducts.forEach((product, index) => {
                    const is7String = product.name.toLowerCase().includes('7-string') || 
                                    product.name.toLowerCase().includes('7 string');
                    
                    results.innerHTML += `
                        <div class="${is7String ? 'found-item' : 'highlight'}">
                            <strong>${index + 1}. ${product.name}</strong><br>
                            <small>7-—Å—Ç—Ä—É–Ω–Ω—ã–π: ${is7String ? '‚úÖ –î–ê' : '‚ùå –ù–ï–¢'}</small>
                        </div>
                    `;
                });
            } else {
                results.innerHTML += `
                    <div class="warning">‚ö†Ô∏è –ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>
                `;
            }
        }
    </script>
</body>
</html>
