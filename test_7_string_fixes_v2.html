<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π 7-string v2</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .results {
            margin-top: 15px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f9f9f9;
            max-height: 400px;
            overflow-y: auto;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        .info {
            color: #17a2b8;
        }
        .warning {
            color: #ffc107;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>üîß –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π 7-string (–≤–µ—Ä—Å–∏—è 13.05)</h1>
    
    <div class="test-section">
        <h3>–¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ Ernie Ball 2621</h3>
        <button class="test-button" onclick="testDuplication()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
        <div id="duplicationResults" class="results"></div>
    </div>
    
    <div class="test-section">
        <h3>–¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</h3>
        <button class="test-button" onclick="testInfiniteScroll()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É</button>
        <div id="scrollResults" class="results"></div>
    </div>
    
    <div class="test-section">
        <h3>–¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–ª–∞–≥–æ–≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</h3>
        <button class="test-button" onclick="testFilterFlags()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–ª–∞–≥–∏</button>
        <div id="flagsResults" class="results"></div>
    </div>

    <script>
        // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
        async function testDuplication() {
            const resultsDiv = document.getElementById('duplicationResults');
            resultsDiv.innerHTML = '<div class="info">üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ Ernie Ball 2621...</div>';
            
            try {
                const response = await fetch('http://localhost:8000/api/products?search=7-string&start=0&limit=1000');
                const data = await response.json();
                const products = data.products;
                
                // –ò—â–µ–º —Ç–æ–≤–∞—Ä—ã Ernie Ball 2621
                const ernie2621Products = products.filter(p => p.name.includes('Ernie Ball 2621'));
                
                let results = '<div class="info">üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:</div>';
                results += `<div>–í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤ —Å "7-string": ${products.length}</div>`;
                results += `<div>–¢–æ–≤–∞—Ä–æ–≤ Ernie Ball 2621: ${ernie2621Products.length}</div>`;
                
                if (ernie2621Products.length > 1) {
                    results += '<div class="error">‚ùå –ù–ê–ô–î–ï–ù–´ –î–£–ë–õ–ò–ö–ê–¢–´ Ernie Ball 2621:</div>';
                    ernie2621Products.forEach((product, index) => {
                        results += `<div>  ${index + 1}. ${product.name}</div>`;
                    });
                } else if (ernie2621Products.length === 1) {
                    results += '<div class="success">‚úÖ –î—É–±–ª–∏–∫–∞—Ç–æ–≤ Ernie Ball 2621 –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                } else {
                    results += '<div class="warning">‚ö†Ô∏è –¢–æ–≤–∞—Ä Ernie Ball 2621 –Ω–µ –Ω–∞–π–¥–µ–Ω</div>';
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –¥—É–±–ª–∏–∫–∞—Ç—ã
                const productNames = products.map(p => p.name);
                const uniqueNames = [...new Set(productNames)];
                const duplicates = productNames.filter((name, index) => productNames.indexOf(name) !== index);
                
                if (duplicates.length > 0) {
                    results += '<div class="warning">‚ö†Ô∏è –û–ë–©–ò–ï –î–£–ë–õ–ò–ö–ê–¢–´:</div>';
                    const duplicateCounts = {};
                    duplicates.forEach(name => {
                        duplicateCounts[name] = (duplicateCounts[name] || 0) + 1;
                    });
                    Object.entries(duplicateCounts).forEach(([name, count]) => {
                        results += `<div>  "${name}" - ${count + 1} —Ä–∞–∑</div>`;
                    });
                } else {
                    results += '<div class="success">‚úÖ –û–±—â–∏—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                }
                
                resultsDiv.innerHTML = results;
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞: ${error.message}</div>`;
            }
        }
        
        // –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
        function testInfiniteScroll() {
            const resultsDiv = document.getElementById('scrollResults');
            resultsDiv.innerHTML = '<div class="info">üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏–∫—É –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏...</div>';
            
            try {
                let results = '<div class="info">üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏:</div>';
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
                if (typeof isSearchActive !== 'undefined') {
                    results += '<div class="success">‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è isSearchActive –Ω–∞–π–¥–µ–Ω–∞</div>';
                } else {
                    results += '<div class="error">‚ùå –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è isSearchActive –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</div>';
                }
                
                if (typeof isCategoryFilterActive !== 'undefined') {
                    results += '<div class="success">‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è isCategoryFilterActive –Ω–∞–π–¥–µ–Ω–∞</div>';
                } else {
                    results += '<div class="error">‚ùå –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è isCategoryFilterActive –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</div>';
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏–∫—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
                results += '<div style="margin-top: 10px;"><strong>–õ–æ–≥–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏:</strong></div>';
                results += '<div>‚Ä¢ –ü—Ä–∏ isSearchActive = true ‚Üí –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞</div>';
                results += '<div>‚Ä¢ –ü—Ä–∏ isCategoryFilterActive = true ‚Üí –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞</div>';
                results += '<div>‚Ä¢ –ü—Ä–∏ isLoading = true ‚Üí –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞</div>';
                results += '<div>‚Ä¢ –ü—Ä–∏ hasMoreProducts = false ‚Üí –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞</div>';
                
                results += '<div style="margin-top: 10px;"><strong>–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:</strong></div>';
                results += '<div>‚Ä¢ –ü—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ 7-string –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∞</div>';
                results += '<div>‚Ä¢ –ü—Ä–∏ –æ—á–∏—Å—Ç–∫–µ —Ñ–∏–ª—å—Ç—Ä–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω–∞</div>';
                
                resultsDiv.innerHTML = results;
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞: ${error.message}</div>`;
            }
        }
        
        // –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–ª–∞–≥–æ–≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
        function testFilterFlags() {
            const resultsDiv = document.getElementById('flagsResults');
            resultsDiv.innerHTML = '<div class="info">üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–ª–∞–≥–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏...</div>';
            
            try {
                let results = '<div class="info">üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–ª–∞–≥–æ–≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:</div>';
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ—É–Ω–∫—Ü–∏–∏
                if (typeof filterProductsByCategory === 'function') {
                    results += '<div class="success">‚úÖ –§—É–Ω–∫—Ü–∏—è filterProductsByCategory –Ω–∞–π–¥–µ–Ω–∞</div>';
                } else {
                    results += '<div class="error">‚ùå –§—É–Ω–∫—Ü–∏—è filterProductsByCategory –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</div>';
                }
                
                if (typeof clearCategoryFilter === 'function') {
                    results += '<div class="success">‚úÖ –§—É–Ω–∫—Ü–∏—è clearCategoryFilter –Ω–∞–π–¥–µ–Ω–∞</div>';
                } else {
                    results += '<div class="error">‚ùå –§—É–Ω–∫—Ü–∏—è clearCategoryFilter –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</div>';
                }
                
                if (typeof search7StringProducts === 'function') {
                    results += '<div class="success">‚úÖ –§—É–Ω–∫—Ü–∏—è search7StringProducts –Ω–∞–π–¥–µ–Ω–∞</div>';
                } else {
                    results += '<div class="error">‚ùå –§—É–Ω–∫—Ü–∏—è search7StringProducts –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</div>';
                }
                
                results += '<div style="margin-top: 10px;"><strong>–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ñ–ª–∞–≥–æ–≤:</strong></div>';
                results += '<div>‚Ä¢ –ü—Ä–∏ –≤—ã–∑–æ–≤–µ filterProductsByCategory("7-string") ‚Üí isCategoryFilterActive = true</div>';
                results += '<div>‚Ä¢ –ü—Ä–∏ –≤—ã–∑–æ–≤–µ clearCategoryFilter() ‚Üí isCategoryFilterActive = false</div>';
                results += '<div>‚Ä¢ –ü—Ä–∏ –≤—ã–∑–æ–≤–µ searchProducts() ‚Üí isSearchActive = true</div>';
                results += '<div>‚Ä¢ –ü—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –ø–æ–∏—Å–∫–∞ ‚Üí isSearchActive = false</div>';
                
                resultsDiv.innerHTML = results;
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞: ${error.message}</div>`;
            }
        }
    </script>
</body>
</html>
