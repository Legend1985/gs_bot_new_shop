<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ Ernie Ball</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .section { background: white; padding: 20px; margin: 20px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .success { color: #28a745; font-weight: bold; }
        .error { color: #dc3545; font-weight: bold; }
        .info { color: #17a2b8; }
        .warning { color: #ffc107; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin: 5px; }
        .results { background: #f8f9fa; padding: 15px; border-radius: 4px; margin: 10px 0; border-left: 4px solid #007bff; }
        .product-item { background: #e9ecef; padding: 10px; margin: 5px 0; border-radius: 4px; }
        .highlight { background: #fff3cd; border-left: 3px solid #ffc107; }
        .duplicate { background: #f8d7da; border-left: 3px solid #dc3545; }
        .missing { background: #f8d7da; border-left: 3px solid #dc3545; }
    </style>
</head>
<body>
    <h1>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ Ernie Ball</h1>
    
    <div class="section">
        <h2>1. –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤</h2>
        <button onclick="loadAllProducts()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã</button>
        <div id="load-results" class="results"></div>
    </div>
    
    <div class="section">
        <h2>2. –ü–æ–∏—Å–∫ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ Ernie Ball</h2>
        <button onclick="findAllErnieBall()">–ù–∞–π—Ç–∏ –≤—Å–µ Ernie Ball</button>
        <div id="ernie-results" class="results"></div>
    </div>
    
    <div class="section">
        <h2>3. –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞ 2621</h2>
        <button onclick="findProduct2621()">–ù–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä 2621</button>
        <div id="find2621-results" class="results"></div>
    </div>
    
    <div class="section">
        <h2>4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤</h2>
        <button onclick="checkDuplicates()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã</button>
        <div id="duplicate-results" class="results"></div>
    </div>

    <script>
        let allProducts = [];
        let ernieBallProducts = [];

        async function loadAllProducts() {
            const results = document.getElementById('load-results');
            results.innerHTML = '<div class="info">üîÑ –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã...</div>';
            
            try {
                const response = await fetch('http://localhost:8000/api/products?start=0&limit=1000');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                allProducts = data.products || [];
                
                results.innerHTML = `
                    <div class="success">‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${allProducts.length} —Ç–æ–≤–∞—Ä–æ–≤</div>
                `;
                
            } catch (error) {
                results.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞: ${error.message}</div>`;
            }
        }

        function findAllErnieBall() {
            const results = document.getElementById('ernie-results');
            
            if (allProducts.length === 0) {
                results.innerHTML = '<div class="error">‚ùå –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã</div>';
                return;
            }
            
            results.innerHTML = '<div class="info">üîç –ò—â–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã Ernie Ball...</div>';
            
            // –ò—â–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã Ernie Ball
            ernieBallProducts = allProducts.filter(product => 
                product.name.toLowerCase().includes('ernie ball')
            );
            
            if (ernieBallProducts.length > 0) {
                results.innerHTML = `
                    <div class="success">‚úÖ –ù–∞–π–¥–µ–Ω–æ ${ernieBallProducts.length} —Ç–æ–≤–∞—Ä–æ–≤ Ernie Ball:</div>
                `;
                
                ernieBallProducts.forEach((product, index) => {
                    const is7String = product.name.toLowerCase().includes('7-string') || 
                                    product.name.toLowerCase().includes('7 string') ||
                                    product.name.toLowerCase().includes('7-—Å—Ç—Ä—É–Ω') ||
                                    product.name.toLowerCase().includes('7 —Å—Ç—Ä—É–Ω');
                    
                    const has2621 = product.name.includes('2621');
                    
                    let className = 'product-item';
                    if (is7String) className += ' highlight';
                    if (has2621) className += ' missing';
                    
                    results.innerHTML += `
                        <div class="${className}">
                            <strong>${index + 1}. ${product.name}</strong><br>
                            <small>ID: ${product.id || 'N/A'}</small><br>
                            <small>7-—Å—Ç—Ä—É–Ω–Ω—ã–π: ${is7String ? '‚úÖ –î–ê' : '‚ùå –ù–ï–¢'}</small><br>
                            <small>–°–æ–¥–µ—Ä–∂–∏—Ç 2621: ${has2621 ? '‚úÖ –î–ê' : '‚ùå –ù–ï–¢'}</small>
                        </div>
                    `;
                });
            } else {
                results.innerHTML = '<div class="error">‚ùå –¢–æ–≤–∞—Ä—ã Ernie Ball –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
            }
        }

        function findProduct2621() {
            const results = document.getElementById('find2621-results');
            
            if (allProducts.length === 0) {
                results.innerHTML = '<div class="error">‚ùå –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã</div>';
                return;
            }
            
            results.innerHTML = '<div class="info">üîç –ò—â–µ–º —Ç–æ–≤–∞—Ä 2621...</div>';
            
            // –ò—â–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —Å 2621
            const products2621 = allProducts.filter(product => 
                product.name.includes('2621')
            );
            
            if (products2621.length > 0) {
                results.innerHTML = `
                    <div class="success">‚úÖ –ù–∞–π–¥–µ–Ω–æ ${products2621.length} —Ç–æ–≤–∞—Ä–æ–≤ —Å 2621:</div>
                `;
                
                products2621.forEach((product, index) => {
                    results.innerHTML += `
                        <div class="product-item highlight">
                            <strong>${index + 1}. ${product.name}</strong><br>
                            <small>ID: ${product.id || 'N/A'}</small><br>
                            <small>–ü–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ: ${product.name}</small>
                        </div>
                    `;
                });
            } else {
                results.innerHTML = `
                    <div class="error">‚ùå –¢–æ–≤–∞—Ä 2621 –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ API</div>
                    <div class="warning">‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:</div>
                    <ul>
                        <li>–¢–æ–≤–∞—Ä –±—ã–ª —É–¥–∞–ª–µ–Ω –∏–∑ API</li>
                        <li>–¢–æ–≤–∞—Ä –±—ã–ª –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω</li>
                        <li>–¢–æ–≤–∞—Ä –±—ã–ª –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤ –¥—Ä—É–≥—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é</li>
                        <li>–û—à–∏–±–∫–∞ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞</li>
                    </ul>
                `;
                
                // –ò—â–µ–º –ø–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã
                const similarProducts = allProducts.filter(product => 
                    product.name.toLowerCase().includes('ernie ball') && 
                    (product.name.toLowerCase().includes('regular slinky') || product.name.toLowerCase().includes('10-56'))
                );
                
                if (similarProducts.length > 0) {
                    results.innerHTML += `
                        <div style="margin-top: 20px;">
                            <h4>üîç –ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã (–≤–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ 2621 —Å –¥—Ä—É–≥–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º):</h4>
                        </div>
                    `;
                    
                    similarProducts.forEach((product, index) => {
                        results.innerHTML += `
                            <div class="product-item">
                                <strong>${index + 1}. ${product.name}</strong>
                            </div>
                        `;
                    });
                }
            }
        }

        function checkDuplicates() {
            const results = document.getElementById('duplicate-results');
            
            if (ernieBallProducts.length === 0) {
                results.innerHTML = '<div class="error">‚ùå –°–Ω–∞—á–∞–ª–∞ –Ω–∞–π–¥–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã Ernie Ball</div>';
                return;
            }
            
            results.innerHTML = '<div class="info">üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã...</div>';
            
            // –ò—â–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
            const duplicates = [];
            const seen = new Set();
            
            ernieBallProducts.forEach(product => {
                const normalizedName = product.name.toLowerCase().trim();
                if (seen.has(normalizedName)) {
                    duplicates.push(product);
                } else {
                    seen.add(normalizedName);
                }
            });
            
            if (duplicates.length > 0) {
                results.innerHTML = `
                    <div class="warning">‚ö†Ô∏è –ù–∞–π–¥–µ–Ω–æ ${duplicates.length} –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:</div>
                `;
                
                duplicates.forEach((product, index) => {
                    results.innerHTML += `
                        <div class="product-item duplicate">
                            <strong>${index + 1}. ${product.name}</strong><br>
                            <small>ID: ${product.id || 'N/A'}</small>
                        </div>
                    `;
                });
            } else {
                results.innerHTML = '<div class="success">‚úÖ –î—É–±–ª–∏–∫–∞—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
            }
        }
    </script>
</body>
</html>
