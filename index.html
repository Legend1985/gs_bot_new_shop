<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="style.css">
	<title>Магазин гитарных струн</title>
</head>
<body>
	<h2 style="text-align:center;">Магазин гитарных струн</h2>
	
	<div class="container">
		<div class="inner">
			<!-- Товары будут загружаться динамически -->
		</div>
	</div>
	
	<div class="usercard" id="usercard">
		
	</div>

	<script src="https://telegram.org/js/telegram-web-app.js"></script>
	<script>
		// Встроенные данные товаров (работает на GitHub Pages)
		const mockProducts = [
			{
				id: 1,
				name: 'Ernie Ball 2221 Regular Slinky 10-46',
				image: 'Goods/Electric_guitar_strings/2221/Ernie_Ball_2221_10-46_150.jpg',
				oldPrice: '450 грн',
				newPrice: 380,
				inStock: true,
				availability: 'В наличии'
			},
			{
				id: 2,
				name: 'Rotosound R13 Roto Greys 13-54',
				image: 'Goods/Electric_guitar_strings/2221/Rotosound_R13_13-54_150.jpg',
				oldPrice: '520 грн',
				newPrice: 420,
				inStock: false,
				availability: 'Нет в наличии'
			},
			{
				id: 3,
				name: 'Dunlop DEN1046 Nickel Wound Light 10-46',
				image: 'Goods/Electric_guitar_strings/2221/Dunlop_DEN1046_10-46_150.jpg',
				oldPrice: '480 грн',
				newPrice: 400,
				inStock: false,
				availability: 'Ожидается'
			},
			{
				id: 4,
				name: 'GHS Boomers GBTM 11-50 Medium',
				image: 'Goods/Electric_guitar_strings/2221/GHS_Boomers_GBTM_11-50_150.jpg',
				oldPrice: '550 грн',
				newPrice: 450,
				inStock: true,
				availability: 'В наличии'
			},
			{
				id: 5,
				name: 'Fender 250M Nickel-Plated Steel 11-49 Medium',
				image: 'Goods/Electric_guitar_strings/2221/Fender_250M_11-49_150.jpg',
				oldPrice: '500 грн',
				newPrice: 420,
				inStock: false,
				availability: 'Нет в наличии'
			},
			{
				id: 6,
				name: 'D\'Addario EXL110 Nickel Wound 10-46',
				image: 'Goods/Electric_guitar_strings/2221/DAddario_EXL110_10-46_150.jpg',
				oldPrice: '470 грн',
				newPrice: 390,
				inStock: true,
				availability: 'В наличии'
			}
		];

		// Функция загрузки товаров (теперь работает локально)
		function loadProducts() {
			const container = document.querySelector('.inner');
			
			mockProducts.forEach((product, index) => {
				const productCard = createProductCard(product, `btn${index + 1}`);
				container.appendChild(productCard);
			});
		}

		// Функция создания карточки товара
		function createProductCard(product, btnId) {
			const card = document.createElement('div');
			card.className = 'item';
			card.innerHTML = `
				<img src="${product.image}" alt="${product.name}" onerror="this.style.display='none'">
				<h3>${product.name}</h3>
				<p class="price">
					<span class="old-price">${product.oldPrice}</span>
					<span class="new-price">${product.newPrice} грн</span>
				</p>
				<p class="availability">${product.availability}</p>
				<button id="${btnId}" class="buy-btn">Купить</button>
			`;
			
			// Добавляем обработчик для кнопки
			const button = card.querySelector(`#${btnId}`);
			if (window.Telegram && window.Telegram.WebApp) {
				button.addEventListener('click', () => {
					window.Telegram.WebApp.MainButton.text = `Выбрано: ${product.name}`;
					window.Telegram.WebApp.MainButton.show();
				});
			}
			
			return card;
		}

		// Загружаем товары при загрузке страницы
		document.addEventListener('DOMContentLoaded', () => {
			loadProducts();
		});
	</script>
</body>
</html>