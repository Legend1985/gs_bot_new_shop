<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест всплывающего окна</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h2 style="text-align:center;">Тест всплывающего окна</h2>
    
    <div class="container">
        <div class="inner">
            <!-- Тестовая карточка товара -->
            <div class="product-card">
                <div class="product-card-top">
                    <img src="Goods/Electric_guitar_strings/2221/Ernie_Ball_2221_10-46_150.jpg" alt="Тестовый товар" class="img">
                    <div class="product-title" style="text-align:center;">Тестовый товар (снят с производства)</div>
                </div>
                <div class="product-card-bottom">
                    <div class="product-status discontinued">Снят с производства</div>
                    <div class="product-bottom-row">
                        <div class="product-prices">
                            <div class="old-price">500 грн</div>
                            <div class="new-price discontinued">400</div>
                        </div>
                        <button class="btn discontinued" id="testBtn">Снят</button>
                    </div>
                </div>
            </div>
            
            <!-- Обычная карточка товара для сравнения -->
            <div class="product-card">
                <div class="product-card-top">
                    <img src="Goods/Electric_guitar_strings/2221/Ernie_Ball_2221_10-46_150.jpg" alt="Обычный товар" class="img">
                    <div class="product-title" style="text-align:center;">Обычный товар (в наличии)</div>
                </div>
                <div class="product-card-bottom">
                    <div class="product-status">В наличии</div>
                    <div class="product-bottom-row">
                        <div class="product-prices">
                            <div class="old-price">450 грн</div>
                            <div class="new-price">380</div>
                        </div>
                        <button class="btn" id="normalBtn">Купить</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Всплывающее окно для товаров, снятых с производства -->
    <div class="popup-overlay" id="discontinuedPopup">
        <div class="popup-content">
            <button class="popup-close" id="popupClose" title="Закрыть">×</button>
            <div class="popup-icon">
                <img src="images/Discontinued.jpg" alt="Извиняющийся котик" title="Sorry!">
            </div>
            <p class="popup-message">Товар снят с производства. Не расстраивайтесь.</p>
        </div>
    </div>

    <script>
        // Функции для работы с всплывающим окном
        function showDiscontinuedPopup() {
            const popup = document.getElementById('discontinuedPopup');
            if (popup) {
                popup.classList.add('show');
                document.body.classList.add('popup-open');
            }
        }

        function hideDiscontinuedPopup() {
            const popup = document.getElementById('discontinuedPopup');
            if (popup) {
                popup.classList.remove('show');
                document.body.classList.remove('popup-open');
            }
        }

        // Инициализация обработчиков всплывающего окна
        function initPopupHandlers() {
            const popup = document.getElementById('discontinuedPopup');
            const closeBtn = document.getElementById('popupClose');
            
            if (closeBtn) {
                closeBtn.addEventListener('click', hideDiscontinuedPopup);
            }
            
            if (popup) {
                // Закрытие по клику вне окна
                popup.addEventListener('click', function(e) {
                    if (e.target === popup) {
                        hideDiscontinuedPopup();
                    }
                });
                
                // Закрытие по нажатию Escape
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && popup.classList.contains('show')) {
                        hideDiscontinuedPopup();
                    }
                });
            }
        }

        // Обработчики кнопок
        document.addEventListener('DOMContentLoaded', function() {
            initPopupHandlers();
            
            // Обработчик для кнопки "Снят с производства"
            const testBtn = document.getElementById('testBtn');
            if (testBtn) {
                testBtn.addEventListener('click', function() {
                    showDiscontinuedPopup();
                });
            }
            
            // Обработчик для обычной кнопки
            const normalBtn = document.getElementById('normalBtn');
            if (normalBtn) {
                normalBtn.addEventListener('click', function() {
                    alert('Обычная кнопка работает!');
                });
            }
        });
    </script>
</body>
</html> 