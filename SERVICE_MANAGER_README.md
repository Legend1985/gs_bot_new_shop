# Service Manager для API Server

Надежный bat-скрипт для управления `api_server.py` в Windows.

## Возможности

- ✅ Запуск сервера в foreground режиме
- ✅ Остановка сервера по PID
- ✅ Перезапуск сервера
- ✅ Проверка статуса сервера
- ✅ Автоматическая проверка зависимостей
- ✅ Цветной вывод в консоли
- ✅ Логирование операций
- ✅ Проверка доступности портов

## Использование

### Запуск сервера
```bat
service_manager.bat start
```

### Остановка сервера
```bat
service_manager.bat stop
```

### Перезапуск сервера
```bat
service_manager.bat restart
```

### Проверка статуса
```bat
service_manager.bat status
```

### Справка
```bat
service_manager.bat help
```

## Файлы

- `service_manager.bat` - Основной скрипт управления
- `api_server.py` - Файл сервера
- `api_server.log` - Файл логов (создается автоматически)
- `api_server.pid` - Файл с PID процесса (создается автоматически)

## Требования

- Windows 7/8/10/11
- Python 3.6+ установлен и добавлен в PATH
- Flask, requests, beautifulsoup4 (устанавливаются автоматически из requirements.txt)

## Особенности

1. **Foreground режим**: Сервер запускается в текущем окне консоли, что позволяет видеть все логи в реальном времени.

2. **Автоматическая проверка зависимостей**: Скрипт проверяет наличие requirements.txt и устанавливает зависимости при необходимости.

3. **Умная остановка**: Сначала попытка мягкой остановки, затем принудительное завершение процесса.

4. **Проверка статуса**: Показывает детальную информацию о состоянии сервера, включая проверку портов.

5. **Цветной вывод**: Использует цвета для лучшего восприятия статусов операций.

## Примеры использования

### Быстрый запуск
```bat
# Запуск сервера
service_manager.bat start

# В другом окне консоли - проверка статуса
service_manager.bat status

# Остановка сервера
service_manager.bat stop
```

### Перезапуск при изменениях кода
```bat
service_manager.bat restart
```

## Устранение проблем

### Сервер не запускается
1. Проверьте наличие Python: `python --version`
2. Проверьте наличие файла `api_server.py`
3. Проверьте логи в файле `api_server.log`

### Порт уже занят
```bat
# Проверить какой процесс использует порт 8000
netstat -ano | findstr :8000

# Завершить процесс по PID
taskkill /F /PID <PID>
```

### Проблемы с зависимостями
```bat
# Установить зависимости вручную
pip install -r requirements.txt
```

## Логи

Все операции логируются в файл `api_server.log`. Логи включают:
- Время запуска/остановки
- Ошибки выполнения
- Статус операций
- Вывод Python сервера

## Безопасность

- Скрипт проверяет наличие всех необходимых файлов перед выполнением
- Использует безопасные методы завершения процессов
- Не требует прав администратора для работы
