// Система переводов для GuitarStrings.com.ua
// Поддерживаемые языки: украинский (по умолчанию), русский, английский

const translations = {
    uk: {
        // Заголовки и навигация
        appTitle: "GuitarStrings.com.ua",
        bonusInfo: "Кількість бонусів: 100",
        profile: "Профіль",
        settings: "Налаштування",
        logout: "Вийти",
        clearCache: "Примусова очистка кешу",
        
        // Поиск
        searchPlaceholder: "Пошук",
        clearSearch: "Очистити пошук",
        noProductsFound: "Товари не знайдено",
        noProductsForQuery: "За запитом \"{query}\" нічого не знайдено",
        
        // Меню
        menu: "Меню",
        home: "Головна",
        catalog: "Каталог",
        about: "Про нас",
        contacts: "Контакти",
        
        // Настройки
        notifications: "Сповіщення",
        theme: "Тема",
        language: "Мова",
        additional: "Додатково",
        
        // Баннер
        bannerTitle: "Electric Guitar Strings",
        
        // Навигация внизу
        products: "Товари",
        cabinet: "Кабінет",
        favorites: "Обране",
        orders: "Замовлення",
        cart: "Кошик",
        
        // Статусы
        onlineStatus: "Напишіть нам, ми онлайн!",
        onlineStatusOffline: "Напишіть нам, ми пізніше відповімо",
        
        // Статусы товаров
        inStock: "В наявності",
        outOfStock: "Відсутній",
        expected: "Очікується",
        onOrder: "Під замовлення",
        discontinued: "Знят з виробництва",
        
        // Кнопки
        compare: "Порівняти",
        
        // Попапы товаров
        discontinuedTitle: "Товар знято з виробництва",
        discontinuedText1: "Даний товар більше не виробляється і недоступний для замовлення.",
        discontinuedText2: "Рекомендуємо звернути увагу на аналогічні товари в нашому каталозі.",
        outOfStockTitle: "Товар відсутній",
        outOfStockText1: "На жаль, даний товар тимчасово відсутній на складі.",
        outOfStockText2: "Залиште заявку менеджеру в Telegram @GuitarStringsUSA для уточнення термінів надходження.",
        expectedTitle: "Товар очікується",
        expectedText1: "Товар очікується в найближчий час. Залиште заявку на цей товар менеджеру в",
        expectedText2: "Вкажіть яку кількість товарів і найменування вам необхідні, після чого менеджер забронює для вас товари з нової поставки і коли товари прибудуть в Одесу зв'яжеться з вами.",
        onOrderTitle: "Товар під замовлення",
        onOrderText1: "Даний товар доступний під замовлення. Зв'яжіться з менеджером в",
        onOrderText1End: "для оформлення замовлення.",
        onOrderText2: "Вкажіть необхідну кількість і менеджер повідомить терміни поставки і вартість доставки.",
        
        // Кнопки
        understand: "Зрозуміло",
        buyButton: "Купити",
        outOfStockButton: "Немає в наявності",
        expectedButton: "Очікується",
        orderButton: "Під замовлення",
        discontinuedButton: "Знят з виробництва",
        
        // Языки
        ukrainian: "Українська",
        russian: "Російська",
        english: "English",
        ukr: "UKR",
        rus: "RUS",
        eng: "ENG",
        
        // Категории товаров
        categories: "Категорії",
        electricGuitarStrings: "Струни для Електрогітари",
        acousticGuitarStrings: "Струни для акустичних гітар",
        classicalGuitarStrings: "Струни для класичної гітари",
        bassStrings: "Струни для Бас гітари",
        singleStrings: "Струни поштучно",
        ukuleleStrings: "Струни для Укулеле",
        stringsWholesale: "Струни оптом",
        guitarPicks: "Медіатори",
        accessories: "Аксесуари",
        percussion: "Перкусія",
        ukulele: "Укулеле",
        drumsticksVicFirth: "Барабанні палички Vic Firth",
        jellyBellyBeanBoozled: "Jelly Belly, BeanBoozled",
        preOrder: "Під замовлення",
        
        // Контакты
        contacts: "Контакти",
        workingHours: "Режим роботи з 9:00 до 19:00 Пн.-Нд.",
        pickupTime: "Час видачі товару в Одесі:",
        pickupTimeNote: "(попередньо узгоджуйте час)",
        mondayFriday: "Пн.-Пт. 12:00 рівно і 13:30 рівно",
        saturday: "Сб. 12:00 рівно і 12:30 рівно",
        sunday: "Нд.",
        phones: "Телефони:",
        viber: "Viber:",
        telegram: "Telegram:",
        email: "Email:",
        instagram: "Instagram:",
        facebook: "Група Facebook:",
        telegramChannel: "Telegram канал:",
        tiktok: "TikTok:",
        youtube: "YouTube:",
        onlinePrice: "Google Drive: Онлайн прайс",
        openPrice: "Відкрити прайс"
    },
    
    ru: {
        // Заголовки и навигация
        appTitle: "GuitarStrings.com.ua",
        bonusInfo: "Кол-во бонусов: 100",
        profile: "Профиль",
        settings: "Настройки",
        logout: "Выйти",
        clearCache: "Принудительная очистка кеша",
        
        // Поиск
        searchPlaceholder: "Поиск",
        clearSearch: "Очистить поиск",
        noProductsFound: "Товары не найдены",
        noProductsForQuery: "По запросу \"{query}\" ничего не найдено",
        
        // Меню
        menu: "Меню",
        home: "Главная",
        catalog: "Каталог",
        about: "О нас",
        contacts: "Контакты",
        
        // Настройки
        notifications: "Уведомления",
        theme: "Тема",
        language: "Язык",
        additional: "Дополнительно",
        
        // Баннер
        bannerTitle: "Electric Guitar Strings",
        
        // Навигация внизу
        products: "Товары",
        cabinet: "Кабинет",
        favorites: "Избранное",
        orders: "Заказы",
        cart: "Корзина",
        
        // Статусы
        onlineStatus: "Напишите нам, мы онлайн!",
        onlineStatusOffline: "Напишите нам, мы позже ответим",
        
        // Статусы товаров
        inStock: "В наличии",
        outOfStock: "Отсутствует",
        expected: "Ожидается",
        onOrder: "Под заказ",
        discontinued: "Снят с производства",
        
        // Кнопки
        compare: "Сравнить",
        
        // Попапы товаров
        discontinuedTitle: "Товар снят с производства",
        discontinuedText1: "Данный товар больше не производится и недоступен для заказа.",
        discontinuedText2: "Рекомендуем обратить внимание на аналогичные товары в нашем каталоге.",
        outOfStockTitle: "Товар отсутствует",
        outOfStockText1: "К сожалению, данный товар временно отсутствует на складе.",
        outOfStockText2: "Оставьте заявку менеджеру в Telegram @GuitarStringsUSA для уточнения сроков поступления.",
        expectedTitle: "Товар ожидается",
        expectedText1: "Товар ожидается в ближайшее время. Оставьте заявку на этот товар менеджеру в",
        expectedText2: "Укажите какое количество товаров и наименования вам необходимы, после чего менеджер забронирует для вас товары из новой поставки и когда товары прибудут в Одессу свяжется с вами.",
        onOrderTitle: "Товар под заказ",
        onOrderText1: "Данный товар доступен под заказ. Свяжитесь с менеджером в",
        onOrderText1End: "для оформления заказа.",
        onOrderText2: "Укажите необходимое количество и менеджер сообщит сроки поставки и стоимость доставки.",
        
        // Кнопки
        understand: "Понятно",
        buyButton: "Купить",
        outOfStockButton: "Нет в наличии",
        expectedButton: "Ожидается",
        orderButton: "Под заказ",
        discontinuedButton: "Снят с производства",
        
        // Языки
        ukrainian: "Українська",
        russian: "Русский",
        english: "English",
        ukr: "UKR",
        rus: "RUS",
        eng: "ENG",
        
        // Категории товаров
        categories: "Категории",
        electricGuitarStrings: "Струны для Электрогитары",
        acousticGuitarStrings: "Струны для Акустической гитары",
        classicalGuitarStrings: "Струны для Классической гитары",
        bassStrings: "Струны для Бас гитары",
        singleStrings: "Струны поштучно",
        ukuleleStrings: "Струны для Укулеле",
        stringsWholesale: "Струны оптом",
        guitarPicks: "Медиаторы",
        accessories: "Аксессуары",
        percussion: "Перкуссия",
        ukulele: "Укулеле",
        drumsticksVicFirth: "Барабанные палочки Vic Firth",
        jellyBellyBeanBoozled: "Jelly Belly, BeanBoozled",
        preOrder: "Под Заказ",
        
        // Контакты
        contacts: "Контакты",
        workingHours: "Режим работы с 9:00 до 19:00 Пн.-Вс.",
        pickupTime: "Время выдачи товара в Одессе:",
        pickupTimeNote: "(предварительно согласовывайте время)",
        mondayFriday: "Пн.-Пт. 12:00 ровно и 13:30 ровно",
        saturday: "Сб. 12:00 ровно и 12:30 ровно",
        sunday: "Вс.",
        phones: "Телефоны:",
        viber: "Viber:",
        telegram: "Telegram:",
        email: "Email:",
        instagram: "Instagram:",
        facebook: "Группа Facebook:",
        telegramChannel: "Telegram канал:",
        tiktok: "TikTok:",
        youtube: "YouTube:",
        onlinePrice: "Google Drive: Онлайн прайс",
        openPrice: "Открыть прайс"
    },
    
    en: {
        // Headers and navigation
        appTitle: "GuitarStrings.com.ua",
        bonusInfo: "Bonus count: 100",
        profile: "Profile",
        settings: "Settings",
        logout: "Logout",
        clearCache: "Force clear cache",
        
        // Search
        searchPlaceholder: "Search",
        clearSearch: "Clear search",
        noProductsFound: "Products not found",
        noProductsForQuery: "Nothing found for query \"{query}\"",
        
        // Menu
        menu: "Menu",
        home: "Home",
        catalog: "Catalog",
        about: "About",
        contacts: "Contacts",
        
        // Settings
        notifications: "Notifications",
        theme: "Theme",
        language: "Language",
        additional: "Additional",
        
        // Banner
        bannerTitle: "Electric Guitar Strings",
        
        // Bottom navigation
        products: "Products",
        cabinet: "Cabinet",
        favorites: "Favorites",
        orders: "Orders",
        cart: "Cart",
        
        // Statuses
        onlineStatus: "Write to us, we are online!",
        onlineStatusOffline: "Write to us, we will answer later",
        
        // Product statuses
        inStock: "In stock",
        outOfStock: "Out of stock",
        expected: "Expected",
        onOrder: "On order",
        discontinued: "Discontinued",
        
        // Buttons
        compare: "Compare",
        
        // Product popups
        discontinuedTitle: "Product discontinued",
        discontinuedText1: "This product is no longer manufactured and is not available for order.",
        discontinuedText2: "We recommend paying attention to similar products in our catalog.",
        outOfStockTitle: "Product out of stock",
        outOfStockText1: "Unfortunately, this product is temporarily out of stock.",
        outOfStockText2: "Leave a request to the manager in Telegram @GuitarStringsUSA to clarify the arrival dates.",
        expectedTitle: "Product expected",
        expectedText1: "The product is expected soon. Leave a request for this product to the manager in",
        expectedText2: "Specify what quantity of goods and names you need, after which the manager will reserve goods from the new shipment for you and when the goods arrive in Odessa, he will contact you.",
        onOrderTitle: "Product on order",
        onOrderText1: "This product is available on order. Contact the manager in",
        onOrderText1End: "to place an order.",
        onOrderText2: "Specify the required quantity and the manager will inform you about delivery times and delivery cost.",
        
        // Buttons
        understand: "Got it",
        buyButton: "Buy it",
        outOfStockButton: "Out of stock",
        expectedButton: "Expected",
        orderButton: "Order it",
        discontinuedButton: "Discontinued",
        
        // Languages
        ukrainian: "Українська",
        russian: "Русский",
        english: "English",
        ukr: "UKR",
        rus: "RUS",
        eng: "ENG",
        
        // Product categories
        categories: "Categories",
        electricGuitarStrings: "Electric Guitar Strings",
        acousticGuitarStrings: "Acoustic Guitar Strings",
        classicalGuitarStrings: "Classical Guitar Strings",
        bassStrings: "Bass Strings",
        singleStrings: "Single Strings",
        ukuleleStrings: "Ukulele strings",
        stringsWholesale: "Strings wholesale",
        guitarPicks: "Guitar Picks",
        accessories: "Accessories",
        percussion: "Percussion",
        ukulele: "Ukulele",
        drumsticksVicFirth: "Drumsticks Vic Firth",
        jellyBellyBeanBoozled: "Jelly Belly, BeanBoozled",
        preOrder: "Pre Order",
        
        // Contacts
        contacts: "Contacts",
        workingHours: "Working hours from 9:00 to 19:00 Mon.-Sun.",
        pickupTime: "Product pickup time in Odessa:",
        pickupTimeNote: "(please coordinate time in advance)",
        mondayFriday: "Mon.-Fri. 12:00 sharp and 13:30 sharp",
        saturday: "Sat. 12:00 sharp and 12:30 sharp",
        sunday: "Sun.",
        phones: "Phones:",
        viber: "Viber:",
        telegram: "Telegram:",
        email: "Email:",
        instagram: "Instagram:",
        facebook: "Facebook Group:",
        telegramChannel: "Telegram channel:",
        tiktok: "TikTok:",
        youtube: "YouTube:",
        onlinePrice: "Google Drive: Online price",
        openPrice: "Open price"
    }
};

// Функция для получения перевода
function getTranslation(key, language = 'uk') {
    const lang = translations[language] || translations.uk;
    return lang[key] || key;
}

// Функция для получения перевода с подстановкой параметров
function getTranslationWithParams(key, params = {}, language = 'uk') {
    let text = getTranslation(key, language);
    
    // Заменяем параметры в тексте
    Object.keys(params).forEach(param => {
        text = text.replace(`{${param}}`, params[param]);
    });
    
    return text;
}

// Функция для установки языка
function setLanguage(language) {
    if (!translations[language]) {
        console.warn(`Language ${language} not supported, using Ukrainian`);
        language = 'uk';
    }
    
    // Сохраняем выбранный язык в localStorage
    localStorage.setItem('selectedLanguage', language);
    
    // Обновляем атрибут lang в HTML
    document.documentElement.lang = language;
    
    // Применяем переводы ко всем элементам
    applyTranslations(language);
}

// Функция для применения переводов
function applyTranslations(language = 'uk') {
    // Получаем все элементы с атрибутом data-translate
    const elements = document.querySelectorAll('[data-translate]');
    
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        const params = JSON.parse(element.getAttribute('data-translate-params') || '{}');
        
        if (element.tagName === 'INPUT' && element.type === 'text') {
            // Для input элементов обновляем placeholder
            element.placeholder = getTranslationWithParams(key, params, language);
        } else {
            // Для остальных элементов обновляем textContent
            element.textContent = getTranslationWithParams(key, params, language);
        }
    });
    
    // Обновляем заголовок страницы
    document.title = getTranslation('appTitle', language);
    
    // Обновляем статус кнопки поддержки
    if (typeof updateSupportButtonStatus === 'function') {
        updateSupportButtonStatus();
    }
    
    // Обновляем статусы товаров на странице
    const statusElements = document.querySelectorAll('.product-status');
    statusElements.forEach(element => {
        const originalAvailability = element.closest('.product-card')?.getAttribute('data-original-availability');
        if (originalAvailability) {
            element.textContent = getStatusText(originalAvailability);
        }
    });
    
    // Обновляем кнопки товаров при смене языка
    if (typeof updateProductButtonTranslations === 'function') {
        // Добавляем проверку инициализации переменных
        if (typeof window.loadedProductNames === 'undefined') {
            console.warn('applyTranslations: loadedProductNames не инициализирована, пропускаем обновление кнопок');
            return;
        }
        updateProductButtonTranslations(language);
    }
}

// Функция для инициализации системы переводов
function initTranslations() {
    // Получаем сохраненный язык или используем украинский по умолчанию
    const savedLanguage = localStorage.getItem('selectedLanguage') || 'uk';
    setLanguage(savedLanguage);
}

// Функция для получения текста статуса товара
function getStatusText(availability) {
    const currentLanguage = localStorage.getItem('selectedLanguage') || 'uk';
    
    if (availability === 'В наличии в Одессе' || availability === 'В наличии') {
        return getTranslation('inStock', currentLanguage);
    } else if (availability === 'Нет в наличии') {
        return getTranslation('outOfStock', currentLanguage);
    } else if (availability === 'Снят с производства') {
        return getTranslation('discontinued', currentLanguage);
    } else if (availability === 'Ожидается' || availability === 'Ожидается поставка') {
        return getTranslation('expected', currentLanguage);
    } else if (availability === 'Под заказ') {
        return getTranslation('onOrder', currentLanguage);
    } else {
        return getTranslation('inStock', currentLanguage);
    }
}

// Функция для получения текста кнопки товара
function getButtonText(availability, language = 'uk') {
    if (availability === 'В наличии' || availability === 'В наявності' || availability === 'In stock' || 
        availability === 'В наличии в Одессе' || availability === 'В наявності в Одесі') {
        return getTranslation('buyButton', language);
    } else if (availability === 'Нет в наличии' || availability === 'Немає в наявності' || availability === 'Out of stock') {
        return getTranslation('outOfStockButton', language);
    } else if (availability === 'Ожидается' || availability === 'Очікується' || availability === 'Expected') {
        return getTranslation('expectedButton', language);
    } else if (availability === 'Под заказ' || availability === 'Під замовлення' || availability === 'On order') {
        return getTranslation('orderButton', language);
    } else if (availability === 'Снят с производства' || availability === 'Знято з виробництва' || availability === 'Discontinued') {
        return getTranslation('discontinuedButton', language);
    } else {
        return getTranslation('buyButton', language);
    }
}

// Экспортируем функции для использования в других файлах
window.translations = {
    getTranslation,
    getTranslationWithParams,
    setLanguage,
    applyTranslations,
    initTranslations,
    getStatusText,
    getButtonText
}; 